<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<title>DrawIt Canvas</title>
	<link rel="stylesheet" href="/static/draw.css">
</head>


<body class="mode-drawing">

	<div class="ui-layer">
		<div id="colorTools" class="ui-element" title="Choose Color">
			<input type="color" id="colorPicker" value="#000000">
		</div>

		<div id="modeSwitch" class="ui-element">
			Switch to View
		</div>
	</div>

	<div class="status-bar" id="statusBar">Drawing Mode</div>

	<div id="viewport">
		<div id="canvas-container">
			<canvas id="DrawingCanva" width="2000" height="2000"></canvas>
			<div class="canvas-label">Canvas (2000x2000)</div>
		</div>
	</div>



	<script type="module">
		import { setupWebsocket } from "/static/websockets.js";
		import { DrawingModule } from '/static/draw.js';
		import { Event } from "/static/events.js"
		const drawingModuleInstance = new DrawingModule("DrawingCanva");

		const sendMessage = await setupWebsocket(async (d) => {
			const event = Event.deserialize(await d.arrayBuffer());
			drawingModuleInstance.HandleEvent(event);
		});

		drawingModuleInstance.listen(sendMessage);
		window.drawingModuleInstance = drawingModuleInstance;

	</script>

</body>

</html>